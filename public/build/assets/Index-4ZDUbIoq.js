import{m as h,c as B,o,w as D,b as e,d as U,x as v,y as f,f as n,g as C,e as j,F as p,i as g,t as a,N as u}from"./app-DHKPQ0Ih.js";import{_ as F}from"./LayoutMain-CsJ4vM3T.js";import"./LayoutAuthenticated-D6VXQ95G.js";import"./colors-B6DiSbTY.js";import"./main-CLApKTMv.js";import"./BaseDivider-DSUyGVju.js";const M={class:"p-6"},I={class:"overflow-x-auto"},L={class:"min-w-full bg-white shadow-md rounded"},O={key:0},R={key:0,class:"border-t hover:bg-gray-50"},q={class:"py-2 px-4"},z={class:"py-2 px-4"},G={class:"font-medium"},H={class:"py-2 px-4"},J={key:0},K={class:"flex flex-wrap gap-1"},P={key:0,class:"bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs"},Q={key:1,class:"text-gray-400 italic text-sm"},W={class:"py-2 px-4"},X={class:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-medium"},Y={class:"py-2 px-4"},Z={class:"flex space-x-2"},ee=["onClick"],te=["onClick"],se={key:1,class:"border-t bg-blue-50"},ie={class:"py-4 px-4"},oe={class:"py-4 px-4"},ne={colspan:"2",class:"py-4 px-4"},ce={class:"space-y-2"},re=["onUpdate:modelValue"],ae=["onClick"],le={class:"py-4 px-4"},de={class:"flex space-x-2"},pe=["onClick"],ge={__name:"Index",props:{services:Array,filters:Object},setup(l){var _,k;const y=l,d=h({search:((_=y.filters)==null?void 0:_.search)||"",type:((k=y.filters)==null?void 0:k.type)||""}),x=h(null),c=h({type:"",service:"",specifications:[]}),b=()=>{u.visit(route("services.create"))},N=()=>{u.get(route("services.index"),{search:d.value.search,type:d.value.type})},V=r=>{const s=y.services.find(t=>t.id===r);c.value={type:s.type,service:s.service,specifications:s.specifications?s.specifications.map(t=>({id:t.id,description:t.description})):[]},x.value=r},m=()=>{x.value=null,c.value={type:"",service:"",specifications:[]}},A=()=>{c.value.specifications.push({id:null,description:""})},E=r=>{c.value.specifications.splice(r,1)},T=r=>{const s=c.value.specifications.filter(i=>i.description&&i.description.trim()!==""),t={type:c.value.type,service:c.value.service,specifications:s};u.put(route("services.update",r),t,{onSuccess:()=>{m()},onError:i=>{console.error("Error updating service:",i)}})},$=r=>{confirm("Are you sure you want to delete this service? This action cannot be undone.")&&u.delete(route("services.destroy",r))};return(r,s)=>(o(),B(F,null,{default:D(()=>[e("div",M,[e("div",{class:"flex justify-between items-center mb-4"},[s[2]||(s[2]=e("h1",{class:"text-2xl font-bold"},"Services",-1)),e("button",{onClick:b,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition"}," Add New Service ")]),e("form",{onSubmit:U(N,["prevent"]),class:"mb-4"},[v(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>d.value.search=t),placeholder:"Search by service type or description",class:"border border-gray-300 rounded px-3 py-2 mr-2"},null,512),[[f,d.value.search]]),s[3]||(s[3]=e("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded"}," Search ",-1))],32),e("div",I,[e("table",L,[s[6]||(s[6]=e("thead",null,[e("tr",{class:"bg-gray-200 text-left"},[e("th",{class:"py-2 px-4"},"ID"),e("th",{class:"py-2 px-4"},"Service Type"),e("th",{class:"py-2 px-4"},"Specifications"),e("th",{class:"py-2 px-4"},"Total Specs"),e("th",{class:"py-2 px-4"},"Actions")])],-1)),e("tbody",null,[!l.services||l.services.length===0?(o(),n("tr",O,[e("td",{colspan:"5",class:"py-8 px-4 text-center text-gray-500"},[s[4]||(s[4]=j(" No services found. ")),e("button",{onClick:b,class:"text-green-600 hover:text-green-700 font-medium ml-1"}," Add your first service ")])])):C("",!0),(o(!0),n(p,null,g(l.services,t=>(o(),n(p,{key:t.id},[x.value!==t.id?(o(),n("tr",R,[e("td",q,"#"+a(t.id),1),e("td",z,[e("span",G,a(t.type),1)]),e("td",H,[t.specifications&&t.specifications.length>0?(o(),n("div",J,[e("div",K,[(o(!0),n(p,null,g(t.specifications.slice(0,3),i=>(o(),n("span",{key:i.id,class:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs"},a(i.description),1))),128)),t.specifications.length>3?(o(),n("span",P," +"+a(t.specifications.length-3)+" more ",1)):C("",!0)])])):(o(),n("span",Q,"No specifications"))]),e("td",W,[e("span",X,a(t.specifications?t.specifications.length:0),1)]),e("td",Y,[e("div",Z,[e("button",{onClick:i=>V(t.id),class:"bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700 transition text-sm"}," Edit ",8,ee),e("button",{onClick:i=>$(t.id),class:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition text-sm"}," Delete ",8,te)])])])):(o(),n("tr",se,[e("td",ie,"#"+a(t.id),1),e("td",oe,[v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>c.value.type=i),type:"text",class:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"Service type"},null,512),[[f,c.value.type]])]),e("td",ne,[e("div",ce,[e("div",{class:"flex justify-between items-center mb-2"},[s[5]||(s[5]=e("span",{class:"text-sm font-medium text-gray-700"},"Specifications:",-1)),e("button",{onClick:A,type:"button",class:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700"}," + Add Spec ")]),(o(!0),n(p,null,g(c.value.specifications,(i,w)=>(o(),n("div",{key:w,class:"flex gap-2 items-center"},[v(e("input",{"onUpdate:modelValue":S=>i.description=S,type:"text",class:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"Specification description"},null,8,re),[[f,i.description]]),e("button",{onClick:S=>E(w),type:"button",class:"bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700"}," Remove ",8,ae)]))),128))])]),e("td",le,[e("div",de,[e("button",{onClick:i=>T(t.id),class:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition text-sm"}," Save ",8,pe),e("button",{onClick:m,class:"bg-gray-400 text-white px-3 py-1 rounded hover:bg-gray-500 transition text-sm"}," Cancel ")])])]))],64))),128))])])])])]),_:1}))}};export{ge as default};

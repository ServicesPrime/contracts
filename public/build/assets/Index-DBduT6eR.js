import{m as v,p as C,q as O,N as b,s as q,f as y,o as s,a as r,u as l,Z,w as d,c as g,g as x,b as e,e as w,t as c,x as L,y as V,F as N,i as D}from"./app-DHKPQ0Ih.js";import{_ as S}from"./CardBox-DaDgPB1c.js";import{_ as j}from"./LayoutMain-CsJ4vM3T.js";import{_ as I}from"./SectionTitleLineWithButton-CR-il7_H.js";import{i as M,M as _,j as P,k as z,L as E}from"./colors-B6DiSbTY.js";import{_ as $}from"./NotificationBar-BNRU8JJe.js";import{_ as h}from"./BaseButton-DpL04PxM.js";import{_ as F}from"./BaseButtons-RlbYvgHa.js";import{d as K,_ as k,C as T}from"./debounce-BObGq1W9.js";import{P as U,L as G}from"./Pagination-CMdYblr3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LayoutAuthenticated-D6VXQ95G.js";import"./main-CLApKTMv.js";import"./BaseDivider-DSUyGVju.js";import"./BaseLevel-dtYSKltJ.js";const H={class:"w-full mb-5"},J={class:"flex flex-col md:flex-row justify-between"},Q={class:"relative w-full md:w-1/2 mr-1 my-4"},R={"data-label":"Nombre"},W={"data-label":"Descripción"},X={"data-label":"key"},Y={"data-label":"acciones"},ee={class:"ml-10"},te={class:"vl-parent"},ye={__name:"Index",props:{name:"Index",title:{type:String,required:!0},records:{type:Object,default:()=>({}),required:!0},routeName:{type:String,required:!0},search:{type:String,required:!0},direction:{type:String,required:!0}},setup(o){const n=o,u=v(n.search),m=v(!1),f=C({filters:{search:u,order:n.records.order??"created_at",direction:n.direction}});O(u,K(function(i){console.log("triggered"),b.get(route(`${n.routeName}index`,f.filters,{replace:!0}))},500));const A=()=>{m.value=!0,b.get(route(`${n.routeName}index`))},B=(i,t)=>{f.filters.order=i,f.filters.direction=t,m.value=!0,b.get(route(`${n.routeName}index`,f.filters))},p=[{label:"Nombre",key:"name",menu:[{title:"Ordenar desde A - Z ",direction:"asc"},{title:"Ordenar desde Z - A ",direction:"desc"}]},{label:"Descripción",key:"description",menu:[{title:"Ordenar desde A - Z ",direction:"asc"},{title:"Ordenar desde Z - A ",direction:"desc"}]},{label:"Key",key:"module_key",menu:[{title:"Ordenar desde A - Z ",direction:"asc"},{title:"Ordenar desde Z - A ",direction:"desc"}]}];return q("filterBy",B),(i,t)=>(s(),y(N,null,[r(l(Z),{title:o.title},null,8,["title"]),r(j,null,{default:d(()=>[r(I,{icon:l(M),title:o.title,main:""},null,8,["icon","title"]),i.$page.props.flash.success?(s(),g($,{key:0,color:"success",icon:l(_),outline:!1},{default:d(()=>[w(c(i.$page.props.flash.success),1)]),_:1},8,["icon"])):x("",!0),i.$page.props.flash.error?(s(),g($,{key:1,color:"danger",icon:l(_),outline:!1},{default:d(()=>[w(c(i.$page.props.flash.error),1)]),_:1},8,["icon"])):x("",!0),e("form",H,[e("div",J,[e("div",Q,[L(e("input",{type:"search",id:"search-dropdown",class:"block p-2.5 md:h-11 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-l-lg md:rounded-l-none rounded-r-lg md:border-l-gray-300 border-l-gray-300 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Ingresa un parametro de busqueda","onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a)},null,512),[[V,u.value]]),r(h,{class:"absolute top-0 right-0 h-full rounded-l-none rounded-r-lg",onClick:A,icon:l(P),color:"info",title:"Limpiar filtro"},null,8,["icon"])]),r(F,null,{default:d(()=>[r(h,{routeName:`${o.routeName}create`,color:"info",icon:l(z),label:"Agregar permiso",class:"w-full"},null,8,["routeName","icon"])]),_:1})])]),o.records.data.length>0?(s(),g(S,{key:2},{default:d(()=>[e("table",null,[e("thead",null,[e("tr",null,[t[2]||(t[2]=e("th",null,null,-1)),e("th",null,[r(k,{title:"Nombre",options:p})]),e("th",null,[r(k,{title:"Descripción",options:p})]),e("th",null,[r(k,{title:"Key",options:p})]),t[3]||(t[3]=e("th",{class:"relative inline-block text-left"},[e("span",{class:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white dark:bg-gray-700 px-3 py-2 text-md font-bold text-gray-900 dark:text-white ring-inset ring-gray-300 hover:bg-gray-100"}," Acciones ")],-1))])]),e("tbody",null,[(s(!0),y(N,null,D(o.records.data,a=>(s(),y("tr",{key:a.id},[t[4]||(t[4]=e("td",{class:"align-items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-book-half",viewBox:"0 0 16 16"},[e("path",{d:"M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"})])],-1)),e("td",R,c(a.name),1),e("td",W,c(a.description),1),e("td",X,c(a.module_key),1),e("td",Y,[e("div",ee,[r(h,{color:"info",icon:l(E),small:"",routeName:`${o.routeName}edit`,parameter:a.id,title:"Editar permiso"},null,8,["icon","routeName","parameter"])])])]))),128))])])]),_:1})):(s(),g(T,{key:3})),r(U,{links:o.records.links,total:o.records.total,to:o.records.to,from:o.records.from},null,8,["links","total","to","from"]),e("div",te,[r(l(G),{active:m.value,"onUpdate:active":t[1]||(t[1]=a=>m.value=a),"can-cancel":!1,"is-full-page":!0},null,8,["active"])])]),_:1})],64))}};export{ye as default};
